@import "tailwindcss";
@import "tw-animate-css";

/* Dark theme defaults */
:root {
  --radius: 0.625rem;

  /* Core surfaces */
  --background: oklch(0.15 0.01 260);      /* ~#0f1115 */
  --foreground: oklch(0.98 0.01 260);      /* near-white */
  --card: oklch(0.2 0.01 260);             /* ~#151821 */
  --card-foreground: var(--foreground);
  --popover: var(--card);
  --popover-foreground: var(--foreground);

  /* Brand + accents */
  --accent: oklch(0.65 0.23 27);           /* brand red ~#ef4444 */
  --accent-foreground: oklch(0.98 0.01 260);/* light text on accent */
  --primary: var(--foreground);             /* use foreground as primary text */
  --primary-foreground: var(--background);
  --secondary: oklch(0.27 0.02 260);        /* subtle surface */
  --secondary-foreground: var(--foreground);
  --muted: oklch(0.32 0.02 260);
  --muted-foreground: oklch(0.72 0.02 260);
  --destructive: oklch(0.62 0.19 25);

  /* UI tokens */
  --border: oklch(0.35 0.02 260);          /* increase contrast for borders */
  --input: oklch(0.22 0.02 260);
  --ring: oklch(0.6 0.02 260);

  /* Charts / sidebar (optional) */
  --chart-1: oklch(0.7 0.2 27);
  --chart-2: oklch(0.72 0.18 162);
  --chart-3: oklch(0.76 0.18 70);
  --chart-4: oklch(0.65 0.25 304);
  --chart-5: oklch(0.66 0.23 16);
  --sidebar: var(--card);
  --sidebar-foreground: var(--foreground);
  --sidebar-primary: var(--accent);
  --sidebar-primary-foreground: var(--accent-foreground);
  --sidebar-accent: var(--secondary);
  --sidebar-accent-foreground: var(--foreground);
  --sidebar-border: var(--border);
  --sidebar-ring: var(--ring);

  /* Legacy aliases used in components (keep for compatibility) */
  --bg-primary: color-mix(in oklab, var(--background) 100%, black 0%);
  --bg-secondary: color-mix(in oklab, var(--secondary) 100%, black 0%);
  --bg-card: var(--card);
  --text-primary: var(--foreground);
  --text-secondary: oklch(0.75 0.02 260);
  --text-muted: oklch(0.65 0.02 260);
  --accent-color: var(--accent);
  --accent-hover: oklch(0.58 0.22 27);
  --border-color: var(--border);
  --border-light: oklch(0.42 0.02 260);
}

.dark {
  /* Mirror :root for explicit dark mode */
  --background: oklch(0.15 0.01 260);
  --foreground: oklch(0.98 0.01 260);
  --card: oklch(0.2 0.01 260);
  --card-foreground: var(--foreground);
  --popover: var(--card);
  --popover-foreground: var(--foreground);
  --accent: oklch(0.65 0.23 27);
  --accent-foreground: oklch(0.98 0.01 260);
  --primary: var(--foreground);
  --primary-foreground: var(--background);
  --secondary: oklch(0.27 0.02 260);
  --secondary-foreground: var(--foreground);
  --muted: oklch(0.32 0.02 260);
  --muted-foreground: oklch(0.72 0.02 260);
  --destructive: oklch(0.62 0.19 25);
  --border: oklch(0.35 0.02 260);
  --input: oklch(0.22 0.02 260);
  --ring: oklch(0.6 0.02 260);
}

/* Base resets without Tailwind @apply to avoid lints */
* { border-color: var(--border); outline-color: color-mix(in oklab, var(--ring) 50%, transparent); }
html { color-scheme: dark; }
body { background-color: var(--background); color: var(--foreground); }

/* Legacy dark utilities (kept for backward compatibility) */
/* Removed .bg-primary override because it conflicts with Tailwind's bg-primary (used by buttons and surfaces) */
/* .bg-primary { background-color: var(--bg-primary) !important; } */
.bg-secondary { background-color: var(--bg-secondary) !important; }
.bg-card { background-color: var(--bg-card) !important; }
.text-primary { color: var(--text-primary) !important; }
.text-secondary { color: var(--text-secondary) !important; }
.text-muted { color: var(--text-muted) !important; }

/* Buttons */
.btn-primary {
  background-color: var(--accent-color);
  color: oklch(0.98 0.01 260);
  border: 1px solid color-mix(in oklab, var(--accent-color) 30%, black 70%);
  padding: 0.5rem 1rem;
  border-radius: var(--radius);
  font-weight: 600;
  transition: all 0.2s ease;
}
.btn-primary:hover { background-color: var(--accent-hover); }

.btn-secondary {
  background-color: color-mix(in oklab, var(--background) 85%, white 15%);
  color: var(--text-secondary);
  border: 1px solid var(--border-color);
  padding: 0.5rem 1rem;
  border-radius: var(--radius);
  font-weight: 600;
  transition: all 0.2s ease;
}
.btn-secondary:hover {
  background-color: color-mix(in oklab, var(--background) 75%, white 25%);
  color: var(--text-primary);
  border-color: var(--border-light);
}

/* Text utilities */
.text-high-contrast { color: var(--text-primary); font-weight: 700; }
.text-medium-contrast { color: var(--text-secondary); font-weight: 500; }

/* Line clamp */
.line-clamp-2 { line-clamp: 2; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.line-clamp-3 { line-clamp: 3; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }

/* Ensure dark widgets */
*, *::before, *::after { color-scheme: dark; }
.light, [data-theme="light"] { color-scheme: dark !important; }
input, textarea, select { background-color: var(--secondary) !important; color: var(--foreground) !important; border-color: var(--border) !important; }
input::placeholder, textarea::placeholder { color: var(--text-muted) !important; }
